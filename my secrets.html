<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Encrypt & decrypt messages with military-grade AES-256 encryption. 100% browser-based - no data leaves your device. Perfect for secure communication, private notes & confidential data." />
  <meta name="keywords" content="AES-256 encryption, secure messaging, private notes, client-side encryption, password-protected messages, secure communication tool, encrypted text sharing, no-server encryption, zero-knowledge messaging, self-destructing messages" />
  <meta name="author" content="Devansh Sahoo" />
  <title>Secrets Safe | AES-256 Encrypted Messages - 100% Client-Side Security</title>
  
  <!-- Open Graph / Social Media Meta Tags -->
  <meta property="og:title" content="Secrets Safe - Military-Grade Message Encryption" />
  <meta property="og:description" content="Encrypt and decrypt private messages with AES-256 encryption. 100% browser-based - no data leaves your device." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://yourdomain.com/secrets-safe" />
  <meta property="og:image" content="https://yourdomain.com/images/secrets-safe-preview.jpg" />
  <meta property="og:site_name" content="Secrets Safe" />
  
  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://yourdomain.com/secrets-safe" />
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Secrets Safe",
    "description": "Military-grade AES-256 message encryption tool that works 100% in your browser",
    "url": "https://yourdomain.com/secrets-safe",
    "applicationCategory": ["SecurityApplication", "CommunicationApplication"],
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "creator": {
      "@type": "Person",
      "name": "Devansh Sahoo"
    }
  }
  </script>
  
  <!-- FAQ Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{
      "@type": "Question",
      "name": "Is Secrets Safe really secure?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! Secrets Safe uses AES-256 encryption (military-grade) and all processing happens in your browser. No data is sent to any server."
      }
    }, {
      "@type": "Question",
      "name": "Can I use this without creating an account?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely! Secrets Safe requires no registration, no email, and no personal information. Just open and use it."
      }
    }]
  }
  </script>
  
  <!-- CryptoJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  
  <style>
    :root {
      --primary: #4361ee;
      --primary-dark: #3a56d4;
      --secondary: #3f37c9;
      --dark: #212529;
      --light: #f8f9fa;
      --success: #00b894;
      --danger: #e84118;
      --warning: #fdcb6e;
      --glow-color: rgba(67, 97, 238, 0.5);
      --border-radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,0.08);
      --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
      --glass: rgba(255, 255, 255, 0.15);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
    }
    
    /* Navigation Styles */
    .main-nav {
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      text-decoration: none;
    }
    
    .nav-links {
      display: flex;
      gap: 1.5rem;
    }
    
    .nav-links a {
      color: var(--dark);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
      position: relative;
    }
    
    .nav-links a:hover {
      color: var(--primary);
    }
    
    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width 0.3s ease;
    }
    
    .nav-links a:hover::after {
      width: 100%;
    }
    
    /* Hero Section */
    header {
      background: var(--gradient);
      color: white;
      padding: 4rem 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .hero-content {
      max-width: 800px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }
    
    h1 {
      font-size: 2.8rem;
      margin-bottom: 0.5rem;
      position: relative;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .subtitle {
      font-size: 1.2rem;
      margin: 1rem auto 2rem;
      max-width: 600px;
      opacity: 0.9;
    }
    
    .feature-list {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }
    
    .feature-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.1);
      padding: 0.8rem 1.2rem;
      border-radius: 50px;
      backdrop-filter: blur(5px);
    }
    
    .feature-item i {
      font-size: 1.1rem;
    }
    
    body {
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
      background-image: radial-gradient(circle at 10% 20%, rgba(67, 97, 238, 0.05) 0%, rgba(67, 97, 238, 0.05) 90%);
    }
    
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 L0,100 Z"></path></svg>');
      background-size: cover;
      opacity: 0.3;
    }
    
    /* Main Container */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    /* Back Link */
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--primary);
      text-decoration: none;
      margin-bottom: 1rem;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    
    .back-link:hover {
      color: var(--primary-dark);
    }
    
    /* Encryption Card */
    .encryption-card {
      background-color: white;
      border-radius: var(--border-radius);
      padding: 2.5rem;
      box-shadow: var(--shadow);
      margin: 2rem auto;
      border: 1px solid rgba(0,0,0,0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .encryption-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(67, 97, 238, 0.15);
    }
    
    /* Form Elements */
    textarea, input {
      width: 100%;
      padding: 14px;
      margin: 12px 0;
      border-radius: var(--border-radius);
      border: 1px solid #e0e0e0;
      font-size: 1em;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
    }
    
    textarea {
      min-height: 150px;
      resize: vertical;
    }
    
    textarea:focus, input:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }
    
    /* Buttons */
    .action-btn {
      background: var(--gradient);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      margin: 8px 8px 8px 0;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
    }
    
    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
    }
    
    .action-btn:active {
      transform: translateY(0);
    }
    
    .action-btn::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
    }
    
    .action-btn:hover::after {
      left: 100%;
    }
    
    .action-btn.glow {
      animation: pulseGlow 1.5s infinite ease-in-out;
      box-shadow: 0 0 20px var(--glow-color);
    }
    
    @keyframes pulseGlow {
      0% { box-shadow: 0 0 20px var(--glow-color); }
      50% { box-shadow: 0 0 30px rgba(67, 97, 238, 0.7); }
      100% { box-shadow: 0 0 20px var(--glow-color); }
    }
    
    .copy-btn {
      background: var(--success);
    }
    
    .copy-btn:hover {
      background: #00a383;
    }
    
    /* Password Strength */
    .password-strength {
      height: 6px;
      background: #e0e0e0;
      border-radius: 3px;
      margin-top: -8px;
      margin-bottom: 12px;
      overflow: hidden;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0;
      transition: width 0.3s ease, background 0.3s ease;
    }
    
    /* Results */
    #decryptedResult {
      padding: 1.5rem;
      background: #f8f9fa;
      border-radius: var(--border-radius);
      word-break: break-word;
      font-family: 'Fira Code', monospace;
      border-left: 4px solid var(--primary);
      margin-top: 1rem;
    }
    
    .error {
      color: var(--danger);
      border-left-color: var(--danger) !important;
    }
    
    /* Section Titles */
    .section-title {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      color: var(--primary);
    }
    
    .section-title i {
      margin-right: 10px;
      font-size: 1.5em;
    }
    
    .section-description {
      color: #666;
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
    }
    
    /* Security Info */
    .security-info {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-top: 2rem;
    }
    
    .security-info h3 {
      margin-top: 0;
      color: var(--primary);
    }
    
    .security-info ul {
      padding-left: 1.5rem;
    }
    
    .security-info li {
      margin-bottom: 0.5rem;
    }
    
    /* FAQ Section */
    .faq-section {
      background-color: white;
      border-radius: var(--border-radius);
      padding: 2rem;
      box-shadow: var(--shadow);
      margin: 2rem auto;
      max-width: 800px;
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .faq-item {
      margin-bottom: 1.5rem;
      border-bottom: 1px solid #eee;
      padding-bottom: 1.5rem;
    }
    
    .faq-question {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: var(--primary-dark);
    }
    
    .faq-answer {
      color: var(--dark);
      line-height: 1.7;
    }
    
    /* Footer */
    footer {
      background: var(--dark);
      color: white;
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
      position: relative;
    }
    
    footer::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gradient);
    }
    
    /* Responsive Styles */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      
      header h1 {
        font-size: 2rem;
      }
      
      .nav-container {
        padding: 1rem;
        flex-direction: column;
      }
      
      .nav-links {
        margin-top: 1rem;
        gap: 1rem;
      }
      
      .feature-list {
        flex-direction: column;
        align-items: center;
      }
    }
    
    /* Accessibility */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
    
    [aria-hidden="true"] {
      display: none;
    }
    
    /* Focus styles */
    a:focus, button:focus, input:focus, textarea:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <nav class="main-nav">
    <div class="nav-container">
      <a href="inde.html" class="logo">ToolVault</a>
      <div class="nav-links">
        <a href="inde.html">Home</a>
        <a href="ai.html">AI Detector</a>
        <a href="my secrets.html">Encryption</a>
        <a href="wishlist.html">Wishlist</a>
        <a href="improved ai.html">Task Manager</a>
      </div>
    </div>
  </nav>

  <header>
    <div class="hero-content">
      <h1>Military-Grade Message Encryption</h1>
      <p class="subtitle">Protect your sensitive information with AES-256 encryption that works 100% in your browser - no data leaves your device.</p>
      
      <div class="feature-list">
        <div class="feature-item">
          <i class="fas fa-lock"></i>
          <span>AES-256 Encryption</span>
        </div>
        <div class="feature-item">
          <i class="fas fa-shield-alt"></i>
          <span>No Server Processing</span>
        </div>
        <div class="feature-item">
          <i class="fas fa-user-secret"></i>
          <span>Zero Data Collection</span>
        </div>
      </div>
    </div>
  </header>

  <div class="monetag-section">
    <!-- Ezoic Boost -->
    <script src="https://www.ezojs.com/ezoic/sa.min.js" data-cfasync="false" async></script>
    <script>
      var ezoicBoostKey = 'YOUR_EZOIC_BOOST_KEY_TOP';
      (function(e,z,o,i,c){if(!e.fbq){var n=e.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!e._fbq)e._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];var t=z.createElement(o);t.async=!0;t.src=i;var s=z.getElementsByTagName(o)[0];s.parentNode.insertBefore(t,s)}})(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', ezoicBoostKey);
      fbq('track', 'PageView');
    </script>
  </div>

  <div class="container">
    <section class="encryption-card" aria-labelledby="encrypt-heading">
      <a href="index.html" class="back-link">
        <i class="fas fa-arrow-left"></i> Back to all tools
      </a>
      
      <h2 id="encrypt-heading" class="section-title">
        <i class="fas fa-lock"></i>
        Encrypt Message
      </h2>
      <p class="section-description">Protect your sensitive information with military-grade encryption. Your message will be secured with AES-256 and can only be decrypted with the correct password.</p>
      
      <label for="plainText" class="sr-only">Message to encrypt</label>
      <textarea id="plainText" rows="6" placeholder="Type your secret message here..." aria-label="Message to encrypt"></textarea>
      
      <label for="encryptPassword" class="sr-only">Encryption password</label>
      <input type="password" id="encryptPassword" placeholder="Enter strong encryption password" aria-label="Encryption password" />
      <div class="password-strength">
        <div class="password-strength-bar" id="passwordStrength"></div>
      </div>
      
      <button id="encryptBtn" class="action-btn glow">
        <i class="fas fa-lock"></i> Encrypt
      </button>
      
      <label for="encryptedResult" class="sr-only">Encrypted result</label>
      <textarea id="encryptedResult" readonly rows="6" placeholder="Encrypted output appears here..." aria-label="Encrypted result"></textarea>
      
      <button class="action-btn copy-btn" onclick="copyEncrypted()">
        <i class="fas fa-copy"></i> Copy Encrypted
      </button>
    </section>

    <section class="encryption-card" aria-labelledby="decrypt-heading">
      <h2 id="decrypt-heading" class="section-title">
        <i class="fas fa-unlock"></i>
        Decrypt Message
      </h2>
      <p class="section-description">Decrypt messages securely in your browser. The decryption happens locally - your password and message never leave your device.</p>
      
      <label for="encryptedText" class="sr-only">Message to decrypt</label>
      <textarea id="encryptedText" rows="6" placeholder="Paste encrypted message here..." aria-label="Message to decrypt"></textarea>
      
      <label for="decryptPassword" class="sr-only">Decryption password</label>
      <input type="password" id="decryptPassword" placeholder="Enter decryption password" aria-label="Decryption password" />
      
      <button id="decryptBtn" class="action-btn glow">
        <i class="fas fa-unlock"></i> Decrypt
      </button>
      
      <div id="decryptedResult" aria-live="polite"></div>
    </section>

    <section class="security-info">
      <h3>Why Secrets Safe is Truly Private</h3>
      <ul>
        <li><i class="fas fa-server"></i> <strong>No Server Processing</strong> - Everything happens in your browser</li>
        <li><i class="fas fa-shield-alt"></i> <strong>Military-Grade Encryption</strong> - AES-256 standard</li>
        <li><i class="fas fa-ban"></i> <strong>No Data Collection</strong> - We don't track or store your information</li>
        <li><i class="fas fa-bolt"></i> <strong>Instant</strong> - No signup required, just encrypt and share</li>
        <li><i class="fas fa-key"></i> <strong>Password Protected</strong> - Only those with the password can decrypt</li>
      </ul>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section" aria-labelledby="faq-section-title">
      <h2 id="faq-section-title">Frequently Asked Questions</h2>
      
      <div class="faq-item">
        <div class="faq-question">Is Secrets Safe really secure?</div>
        <div class="faq-answer">Yes! Secrets Safe uses AES-256 encryption (military-grade) and all processing happens in your browser. No data is sent to any server. The encryption happens entirely in your browser using the CryptoJS library, which implements the industry-standard AES-256 algorithm.</div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question">Can I use this without creating an account?</div>
        <div class="faq-answer">Absolutely! Secrets Safe requires no registration, no email, and no personal information. Just open and use it. All encryption and decryption happens locally in your browser with no server interaction.</div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question">What happens if I lose the password?</div>
        <div class="faq-answer">There is no way to recover an encrypted message without the password. This is by design to ensure maximum security. We don't store any passwords or encrypted messages, so please keep your password safe and consider sharing it through a different channel than the encrypted message.</div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question">How does this compare to other encryption tools?</div>
        <div class="faq-answer">Unlike many online encryption tools that process data on their servers, Secrets Safe performs all encryption and decryption in your browser. This means your sensitive information never leaves your device, providing an additional layer of security and privacy.</div>
      </div>
    </section>
  </div>

  <div class="monetag-section">
    <!-- Ezoic Boost -->
    <script src="https://www.ezojs.com/ezoic/sa.min.js" data-cfasync="false" async></script>
    <script>
      var ezoicBoostKey = 'YOUR_EZOIC_BOOST_KEY_BOTTOM';
      (function(e,z,o,i,c){if(!e.fbq){var n=e.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!e._fbq)e._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];var t=z.createElement(o);t.async=!0;t.src=i;var s=z.getElementsByTagName(o)[0];s.parentNode.insertBefore(t,s)}})(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', ezoicBoostKey);
      fbq('track', 'PageView');
    </script>
  </div>

  <footer>
    <p>&copy; 2025 ToolVault. All rights reserved.</p>
    <p>Your privacy is our priority - no data leaves your browser.</p>
  </footer>

  <script>
    // DOM Elements
    const plainText = document.getElementById('plainText');
    const encryptPassword = document.getElementById('encryptPassword');
    const encryptBtn = document.getElementById('encryptBtn');
    const encryptedResult = document.getElementById('encryptedResult');
    const encryptedText = document.getElementById('encryptedText');
    const decryptPassword = document.getElementById('decryptPassword');
    const decryptBtn = document.getElementById('decryptBtn');
    const decryptedResult = document.getElementById('decryptedResult');
    const passwordStrength = document.getElementById('passwordStrength');

    // Password strength indicator
    encryptPassword.addEventListener('input', function() {
      const password = this.value;
      let strength = 0;
      
      // Length check
      if (password.length > 0) strength += 1;
      if (password.length >= 8) strength += 1;
      if (password.length >= 12) strength += 1;
      
      // Complexity checks
      if (/[A-Z]/.test(password)) strength += 1;
      if (/[0-9]/.test(password)) strength += 1;
      if (/[^A-Za-z0-9]/.test(password)) strength += 1;
      
      // Update strength bar
      const width = Math.min(100, strength * 20);
      let color = '#e84118'; // red
      if (strength >= 3) color = '#fdcb6e'; // yellow
      if (strength >= 5) color = '#00b894'; // green
      
      passwordStrength.style.width = width + '%';
      passwordStrength.style.background = color;
    });

    // Update button glow states
    function updateGlow() {
      encryptBtn.classList.toggle('glow', plainText.value.trim() && encryptPassword.value.trim());
      decryptBtn.classList.toggle('glow', encryptedText.value.trim() && decryptPassword.value.trim());
    }

    // Event listeners for input changes
    document.querySelectorAll('textarea, input').forEach(el => {
      el.addEventListener('input', updateGlow);
    });

    // Encrypt function
    encryptBtn.addEventListener('click', () => {
      const text = plainText.value.trim();
      const password = encryptPassword.value.trim();
      
      if (!text) {
        alert("Please enter a message to encrypt.");
        plainText.focus();
        return;
      }
      
      if (!password) {
        alert("Please enter an encryption password.");
        encryptPassword.focus();
        return;
      }
      
      if (password.length < 8) {
        if (!confirm("Warning: Your password is short (less than 8 characters). For better security, we recommend using a longer password. Continue anyway?")) {
          encryptPassword.focus();
          return;
        }
      }
      
      try {
        // Add a random salt to improve security
        const salt = CryptoJS.lib.WordArray.random(128/8);
        const key = CryptoJS.PBKDF2(password, salt, {
          keySize: 256/32,
          iterations: 1000
        });
        
        const iv = CryptoJS.lib.WordArray.random(128/8);
        const encrypted = CryptoJS.AES.encrypt(text, key, { 
          iv: iv,
          padding: CryptoJS.pad.Pkcs7,
          mode: CryptoJS.mode.CBC
        });
        
        // Combine salt, iv, and ciphertext for storage
        const result = {
          salt: salt.toString(),
          iv: iv.toString(),
          ct: encrypted.toString()
        };
        
        encryptedResult.value = JSON.stringify(result);
        
        // Show success message
        decryptedResult.innerHTML = '<div style="color: var(--success)"><i class="fas fa-check-circle"></i> Message encrypted successfully!</div>';
        decryptedResult.classList.remove('error');
      } catch (error) {
        console.error("Encryption error:", error);
        decryptedResult.innerHTML = '<div style="color: var(--danger)"><i class="fas fa-exclamation-circle"></i> An error occurred during encryption. Please try again.</div>';
        decryptedResult.classList.add('error');
      }
    });

    // Decrypt function
    decryptBtn.addEventListener('click', () => {
      const encrypted = encryptedText.value.trim();
      const password = decryptPassword.value.trim();
      
      if (!encrypted) {
        alert("Please enter an encrypted message to decrypt.");
        encryptedText.focus();
        return;
      }
      
      if (!password) {
        alert("Please enter the decryption password.");
        decryptPassword.focus();
        return;
      }
      
      try {
        // Parse the encrypted data (should contain salt, iv, and ciphertext)
        const encryptedData = JSON.parse(encrypted);
        
        if (!encryptedData.salt || !encryptedData.iv || !encryptedData.ct) {
          throw new Error("Invalid encrypted message format");
        }
        
        // Recreate the key using the salt
        const salt = CryptoJS.enc.Hex.parse(encryptedData.salt);
        const key = CryptoJS.PBKDF2(password, salt, {
          keySize: 256/32,
          iterations: 1000
        });
        
        const iv = CryptoJS.enc.Hex.parse(encryptedData.iv);
        const decrypted = CryptoJS.AES.decrypt(encryptedData.ct, key, { 
          iv: iv,
          padding: CryptoJS.pad.Pkcs7,
          mode: CryptoJS.mode.CBC
        });
        
        const result = decrypted.toString(CryptoJS.enc.Utf8);
        
        if (result) {
          decryptedResult.innerHTML = `<strong><i class="fas fa-check-circle"></i> Decrypted Successfully:</strong><br><pre>${result}</pre>`;
          decryptedResult.classList.remove('error');
        } else {
          decryptedResult.innerHTML = '<div style="color: var(--danger)"><i class="fas fa-exclamation-circle"></i> Wrong password or invalid ciphertext.</div>';
          decryptedResult.classList.add('error');
        }
      } catch (error) {
        console.error("Decryption error:", error);
        decryptedResult.innerHTML = '<div style="color: var(--danger)"><i class="fas fa-exclamation-circle"></i> Error decrypting. Check your input and password.</div>';
        decryptedResult.classList.add('error');
      }
    });

    // Copy encrypted text
    async function copyEncrypted() {
      const text = encryptedResult.value;
      if (!text) {
        alert("Nothing to copy!");
        return;
      }
      
      try {
        await navigator.clipboard.writeText(text);
        // Visual feedback
        const originalText = encryptedResult.value;
        encryptedResult.value = "Copied to clipboard!";
        setTimeout(() => {
          encryptedResult.value = originalText;
        }, 1500);
      } catch (error) {
        console.error("Copy failed:", error);
        alert("Failed to copy. Please try again or copy manually.");
      }
    }

    // Initialize when DOM is ready
  document.addEventListener('DOMContentLoaded', function() {
  updateGlow(); // Set initial button states

  // Delay focusing to avoid scrolling down automatically
  setTimeout(() => {
    plainText.focus({ preventScroll: true });
  }, 100);
});

  </script>
</body>
</html>